const t={main:"index.js",source:{"index.js":`import u from"varhub:rpc";import g from"varhub:room";import c from"varhub:players";var l=new c(g,(t,e)=>e?String(e):void 0),r=new u({},{height:0,data:[]});u.default.setState({win:null,x:null,o:null,turn:null});function w(t){let e={...u.default.state,...t};u.default.setState(e)}function d(){for(let t of l)t.setTeam(void 0);w({x:null,o:null,turn:null,win:null}),r.setState({height:0,data:[]})}l.on("offline",t=>t.kick());l.on("leave",t=>{t.team&&d()});function p(t){return t==="x"?"o":t==="o"?"x":null}var x=[[0,1],[1,1],[1,0],[1,-1]];function b(t,e,a){let f=E(r.state.data,t,e,a,4);if(!f)return!1;let h={x:"X",o:"O"}[a],i=r.state.data.map(n=>[...n]);for(let[n,s]of f)i[n][s]=h;return r.setState(n=>({...n,data:i})),w({win:a,turn:null}),!0}function E(t,e,a,f,h){let i=[];for(let n of x){let s=[],o=[e,a];for(;t[o[0]]?.[o[1]]===f;)s.push(o),o=[o[0]+n[0],o[1]+n[1]];for(o=[e-n[0],a-n[1]];t[o[0]]?.[o[1]]===f;)s.push(o),o=[o[0]-n[0],o[1]-n[1]];s.length>=h&&i.push(...s)}return i.length===0?null:i}function k(t){let e=l.get(this);if(!e)throw new Error("wrong state");if(t!=="x"&&t!=="o")throw new Error("wrong team");if(l.getTeam(t).size)throw new Error("team is taken");e.setTeam(t),w({x:[...l.getTeam("x")][0]?.name??null,o:[...l.getTeam("o")][0]?.name??null,win:null,turn:null})}function P(t=r.state.data.length,e=r.state.height){if(!l.get(this)?.team)throw new Error("wrong group");if(u.default.state.turn!==null)throw new Error("wrong state");if(u.default.state.x==null||u.default.state.o==null)throw new Error("no players");if(!Number.isInteger(t))throw new Error("rows format");if(!Number.isInteger(e))throw new Error("height format");if(t<4||t>20)throw new Error("rows format");if(e<4||e>20)throw new Error("height format");r.setState({height:e,data:Array.from({length:t}).map(()=>[])}),w({win:null})}function v(t){let e=l.get(this);if(!e?.team)throw new Error("wrong group");let a=e.team;if(u.default.state.turn&&e.team!==u.default.state.turn)throw new Error("wrong group");if(u.default.state.win)throw new Error("wrong group");if(!Number.isInteger(t))throw new Error("wrong colNumber");if(t<0||t>=r.state.data.length)throw new Error("colNumber out of bounds");if(r.state.data[t].length>=r.state.height)throw new Error("height out");r.setState(i=>({...i,data:i.data.map((n,s)=>s===t?[...n,a]:n)}));let f=r.state.data.some(({length:i})=>i<r.state.height);return b(t,r.state.data[t].length-1,a)||w({turn:f?p(a):null}),!0}var C=()=>r;export{C as Field,k as joinTeam,v as move,P as start};
`}},e="bfc96acac1dffc7edb7c509589a3e814ff86d5f6653f93261ca0696b2027105d";export{e as integrity,t as module};
